```mermaid
sequenceDiagram
    actor 用户 as 用户
    participant 前端 as 前端
    participant 后端 as 后端
    participant 支付网关 as 支付网关

    用户 ->> 前端: 1. 提交支付订单
    前端 ->> 后端: 2. 创建订单请求
    后端 -->> 前端: 3. 返回订单ID和金额
    前端 ->> 后端: 4. 发起支付请求(含订单ID)
    后端 ->> 支付网关: 5. 生成支付凭证请求
    支付网关 -->> 后端: 6. 返回支付参数(如支付URL/token)
    后端 -->> 前端: 7. 返回支付参数
    前端 ->> 用户: 8. 跳转支付页面

    alt 支付流程
        用户 ->> 支付网关: 9. 确认支付(输入密码/验证)
        支付网关 ->> 支付网关: 10. 处理支付
        支付网关 -->> 用户: 11. 显示支付结果页面
        支付网关 ->> 后端: 12. 异步回调通知(支付结果)
        后端 ->> 后端: 13. 验证签名并更新订单状态
        后端 -->> 支付网关: 14. 返回回调响应(ACK)
        后端 ->> 前端: 15. 推送支付结果(WebSocket/轮询)
        前端 ->> 用户: 16. 展示支付结果
    end
